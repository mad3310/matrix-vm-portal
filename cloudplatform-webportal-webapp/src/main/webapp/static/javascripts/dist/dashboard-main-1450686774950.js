function ClientInfor(){this.engine={ie:0,gecko:0,webkit:0,khtml:0,opera:0,ver:null},this.browser={ie:0,firefox:0,safari:0,konq:0,opera:0,chrome:0,ver:null},this.system={win:!1,mac:!1,xll:!1,iphone:!1,ipod:!1,ipad:!1,ios:!1,android:!1,nokiaN:!1,winMobile:!1,wii:!1,ps:!1},this.ua=window.navigator.userAgent,this.p=window.navigator.platform,this.getSystemInfor=function(){if(this.system.win=0==this.p.indexOf("Win"),this.system.mac=0==this.p.indexOf("Mac"),this.system.xll=0==this.p.indexOf("Linux")||0==this.p.indexOf("Xll"),this.system.iphone=this.ua.indexOf("iPhone")>-1,this.system.ipod=this.ua.indexOf("iPod")>-1,this.system.ipad=this.ua.indexOf("iPad")>-1,this.system.mac&&this.ua.indexOf("Mobile")>-1&&(/CPU (?:iPhone )?OS (\d+_\d+)/.test(this.ua)?this.system.ios=parseFloat(RegExp.$1.replace("_",".")):this.system.ios=2),/Android (\d+\.\d+)/.test(this.ua)&&(this.system.android=parseFloat(RegExp.$1)),this.system.nokiaN=this.ua.indexOf("NokiaN")>-1,"CE"==this.system.win?this.system.winMobile=this.system.win:"Ph"==this.system.win&&/Windows Phone OS (\d+.\d+)/.test(this.ua)&&(this.system.win="Phone",this.system.winMobile=parseFloat(RegExp.$1)),this.system.wii=this.ua.indexOf("Wii")>-1,this.system.ps=/playstation/i.test(this.ua),this.system.win&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(this.ua))if("NT"==RegExp.$1)switch(RegExp.$2){case"5.0":this.system.win="2000";break;case"5.1":this.system.win="XP";break;case"6.0":this.system.win="Vista";break;case"6.1":this.system.win="7";break;case"6.2":this.system.win="8";break;default:this.system.win="NT"}else"9x"==RegExp.$1?this.system.win="ME":this.system.win=RegExp.$1;return this.system},this.getBrowserInfor=function(){if(window.opera)this.engine.ver=this.browser.ver=window.opera.version(),this.engine.opera=this.browser.opera=parseFloat(this.engine.ver);else if(/AppleWebKit\/(\S+)/i.test(this.ua))if(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.webkit=parseFloat(this.engine.ver),/Chrome\/(\S+)/i.test(this.ua))this.browser.chrome=parseFloat(this.engine.ver);else if(/Version\/(\S+)/i.test(this.ua))this.browser.safari=parseFloat(this.engine.ver);else{var e=1;e=this.engine.webkit<100?1:this.engine.webkit<312?1.2:this.engine.webkit<412?1.3:2,this.browser.safari=this.browser.ver=e}else/KHTML\/(\S+)/i.test(this.ua)||/Konqueror\/([^;]+)/i.test(this.ua)?(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.khtml=this.browser.konq=parseFloat(this.engine.ver)):/rv:([^\)]+)\) Gecko\/\d{8}/i.test(this.ua)?(this.engine.ver=RegExp.$1,this.engine.gecko=parseFloat(this.engine.ver),/Firefox\/(\S+)/i.test(this.ua)&&(this.browser.ver=RegExp.$1,this.browser.firefox=parseFloat(this.browser.ver))):/MSIE\s([^;]+)/i.test(this.ua)?(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.ie=this.browser.ie=parseFloat(this.engine.ver)):/trident.*rv:([^)]+)/i.test(this.ua)&&(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.ie=this.browser.ie=parseFloat(this.engine.ver));return this.browser},this.getEngineInfor=function(){if(window.opera)this.engine.ver=this.browser.ver=window.opera.version(),this.engine.opera=this.browser.opera=parseFloat(this.engine.ver);else if(/AppleWebKit\/(\S+)/i.test(this.ua))if(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.webkit=parseFloat(this.engine.ver),/Chrome\/(\S+)/i.test(this.ua))this.browser.chrome=parseFloat(this.engine.ver);else if(/Version\/(\S+)/i.test(this.ua))this.browser.safari=parseFloat(this.engine.ver);else{var e=1;e=this.engine.webkit<100?1:this.engine.webkit<312?1.2:this.engine.webkit<412?1.3:2,this.browser.safari=this.browser.ver=e}else/KHTML\/(\S+)/i.test(this.ua)||/Konqueror\/([^;]+)/i.test(this.ua)?(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.khtml=this.browser.konq=parseFloat(this.engine.ver)):/rv:([^\)]+)\) Gecko\/\d{8}/i.test(this.ua)?(this.engine.ver=RegExp.$1,this.engine.gecko=parseFloat(this.engine.ver),/Firefox\/(\S+)/i.test(this.ua)&&(this.browser.ver=RegExp.$1,this.browser.firefox=parseFloat(this.browser.ver))):/MSIE\s([^;]+)/i.test(this.ua)?(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.ie=this.browser.ie=parseFloat(this.engine.ver)):/trident.*rv:([^)]+)/i.test(this.ua)&&(this.engine.ver=this.browser.ver=RegExp.$1,this.engine.ie=this.browser.ie=parseFloat(this.engine.ver));return this.engine}}define("browserCheck",["jquery"],function(e){return function(){var t;return t||e.browserCheck}}(this)),define("common",["jquery","browserCheck"],function(e){function t(e){var t=e.getBrowserInfor();t.ie&&t.ver<9?window.location.replace="/browserError":t.firefox&&t.ver<5?window.location.replace="/browserError":t.chrome&&t.ver<7?window.location.replace="/browserError":t.safari&&t.ver<4&&(window.location.replace="/browserError")}function i(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}return""}var n=new ClientInfor;t(n);var r=e(window).height()-70;e(".content").css("min-height",r);for(var a=[{url:"/profile/#/dashboard",title:"概览",icon:"iconfont icon-clouddashboard",isSubmenuFisrt:!0},{url:"/cvm/#/vm",title:"云主机",icon:"iconfont icon-cloudhost",isSubmenuFisrt:!0},{url:"/cvm/#/vm-disk",title:"云硬盘",icon:"iconfont icon-clouddisk"},{url:"/cvm/#/vm-vpc",title:"私有网络",icon:"iconfont icon-cloudnet"},{url:"/cvm/#/vm-floatIP",title:"公网IP",icon:"iconfont icon-cloudfloatip"},{url:"/cvm/#/vm-router",title:"路由器",icon:"iconfont icon-cloudroute"},{url:"/cvm/#/vm-snapshot",title:"快照",icon:"iconfont icon-cloudsnap"},{url:"/cvm/#/vm-image",title:"镜像",icon:"iconfont icon-cloudimage"},{url:"/cvm/#/vm-keypair",title:"密钥",icon:"iconfont icon-cloudkeypair"}],s=null,o=[],c=e(".side-menu"),l=window.location.pathname,u=window.location.hash,d=l+u,p=function(e){var t=!1;return t=u?a[m].url===d:e.url.indexOf(l)>-1&&e.isSubmenuFisrt},m=0,v=a.length;v>m;m++)s='<li class="menu-item'+(p(a[m])?" active":"")+'"><a href="'+a[m].url+'"><i class="'+a[m].icon+'"></i><span>'+a[m].title+"</span></a></li>",o.push(s);c.html(o.join("")),c.on("click",".menu-item a",function(t){c.children(".menu-item").removeClass("active"),e(t.target).closest("li").addClass("active")}),e(".header-username").text(i("userName"));var f=i("headPortrait");if(f)e(".account-icon").attr("src",f);else{var h=i("userId"),g="/user/"+h;e.ajax({url:g,type:"get",success:function(t){if(0==t.result);else{var i=t.data;i&&i.userAvatar&&e(".account-icon").attr("src",i.userAvatar)}}})}return{}}),define("controllers/app.controller",["angular"],function(e){return e.module("app.controller",[])}),define("controllers/dashboard",["controllers/app.controller"],function(e){e.controller("DashboardCtrl",["$scope","$modal","Config","HttpService","$http","WidgetService","CurrentContext",function(e,t,i,n,r,a,s){function o(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}return""}function c(t){e.username=o("userName");var i=o("headPortrait");i?(e.usericon.hide=!0,e.userimg=i):n.doGet(t).then(function(t){if(0==t.result)a.notifyError("获取用户信息失败！");else{var i=t.data;e.usericon.hide=!0,i.userAvatar?e.userimg=i.userAvatar:(e.usericon.hide=!1,e.usericon.styles={color:"#f5c131"}),e.mobileStatus=i.mobileStatus,e.emailStatus=i.emailStatus,e.userStatus=i.userStatus}})}function l(t){n.doGet(t).then(function(t){0==t.result?a.notifyError("获取消息失败！"):e.message=t.data})}function u(t){n.doGet(t).then(function(t){0==t.result?a.notifyError("获取账户余额失败！"):e.remain=t.data})}function d(t){n.doGet(t).then(function(t){0==t.result?a.notifyError("获取账单信息失败！"):e.billMes=t.data})}function p(t){e.isloading=!1,n.doGet(t).then(function(t){if(0==t.result)a.notifyError("获取操作信息失败！");else{e.isloading=!0,e.expander=t.data.operate;var i=new Date(t.data.date);e.date=i,e.year=i.getFullYear(),e.month=i.getMonth()+1,e.day=i.getDate(),e.hour=i.getHours(),e.minute=i.getMinutes()}})}function m(t){return n.doGet(t).then(function(t){0==t.result?a.notifyError("获取服务信息失败！"):e.service=t.data})}function v(t){n.doGet(t).then(function(t){if(0==t.result)a.notifyError("获取服务信息失败！");else{var i=0,n=0,r=0,s=0;i=t.data[2]?t.data[2]:0,n=t.data[3]?t.data[3]:0,r=t.data[4]?t.data[4]:0,s=t.data[5]?t.data[5]:0;var o=i+n+r+s;e.consume.total=o.toFixed(2),e.consume.ecsconsume=i.toFixed(2),e.consume.diskconsume=n.toFixed(2),e.consume.floatipconsume=r.toFixed(2),e.consume.routeconsume=s.toFixed(2)}})}function f(t,i){var r=m(i);r.then(function(i){n.doGet(t).then(function(t){0==t.result?a.notifyError("获取配额信息失败！"):(e.quotas.CLOUDVM_BAND_WIDTH=t.data.CLOUDVM_BAND_WIDTH,e.quotas.bandwidthStyle={width:e.service.bandWidth/e.quotas.CLOUDVM_BAND_WIDTH*100+"%"},e.quotas.CLOUDVM_CPU=t.data.CLOUDVM_CPU,e.quotas.cpuStyle={width:e.service.cpu/e.quotas.CLOUDVM_CPU*100+"%"},e.quotas.CLOUDVM_FLOATING_IP=t.data.CLOUDVM_FLOATING_IP,e.quotas.floatIpStyle={width:e.service.floatingIp/e.quotas.CLOUDVM_FLOATING_IP*100+"%"},e.quotas.CLOUDVM_KEY_PAIR=t.data.CLOUDVM_KEY_PAIR,e.quotas.keyPairStyle={width:e.service.keyPair/e.quotas.CLOUDVM_KEY_PAIR*100+"%"},e.quotas.CLOUDVM_MEMORY=t.data.CLOUDVM_MEMORY,e.quotas.memoryStyle={width:e.service.memory/1024/e.quotas.CLOUDVM_MEMORY*100+"%"},e.quotas.CLOUDVM_NETWORK=t.data.CLOUDVM_NETWORK,e.quotas.vpcStyle={width:e.service.privateNetwork/e.quotas.CLOUDVM_NETWORK*100+"%"},e.quotas.CLOUDVM_ROUTER=t.data.CLOUDVM_ROUTER,e.quotas.routerStyle={width:e.service.router/e.quotas.CLOUDVM_ROUTER*100+"%"},e.quotas.CLOUDVM_SUBNET=t.data.CLOUDVM_SUBNET,e.quotas.subNetStyle={width:e.service.privateSubnet/e.quotas.CLOUDVM_SUBNET*100+"%"},e.quotas.CLOUDVM_VM=t.data.CLOUDVM_VM,e.quotas.ecsStyle={width:e.service.ecs/e.quotas.CLOUDVM_VM*100+"%"},e.quotas.CLOUDVM_VM_SNAPSHOT=t.data.CLOUDVM_VM_SNAPSHOT,e.quotas.vmSnapshotStyle={width:e.service.vmSnapshot/e.quotas.CLOUDVM_VM_SNAPSHOT*100+"%"},e.quotas.CLOUDVM_VOLUME=t.data.CLOUDVM_VOLUME,e.quotas.diskStyle={width:e.service.disk/e.quotas.CLOUDVM_VOLUME*100+"%"},e.quotas.CLOUDVM_VOLUME_SIZE=t.data.CLOUDVM_VOLUME_SIZE,e.quotas.volumeSizeStyle={width:e.service.volumeSize/e.quotas.CLOUDVM_VOLUME_SIZE*100+"%"},e.quotas.CLOUDVM_VOLUME_SNAPSHOT=t.data.CLOUDVM_VOLUME_SNAPSHOT,e.quotas.volumeSnapshotStyle={width:e.service.volumeSnapshot/e.quotas.CLOUDVM_VOLUME_SNAPSHOT*100+"%"},e.quotas.CLOUDVM_KEY_PAIR=t.data.CLOUDVM_KEY_PAIR,e.quotas.keypairStyle={width:e.service.keyPair/e.quotas.CLOUDVM_KEY_PAIR*100+"%"})})})}e.username="",e.usericon={},e.userimg="",e.message="",e.mobileStatus="",e.emailStatus="",e.userStatus="",e.remain="",e.billMes="",e.expander="",e.expander.layout="normal",e.consume={},e.service={},e.quotas={};var h=new Date,g=h.getMonth()+1,b=h.getFullYear().toString()+g.toString();e.billdate=b,e.expanderToggle=function(t){var i=t.target||t.srcElement,n=$(i).parent().parent().find(".operation-items");$(i).parent().parent().hasClass("zhankai")?($(i).parent().parent().removeClass("zhankai"),$(i).text("更多")):($(i).parent().parent().addClass("zhankai"),$(i).text("收起"),n.scrollTop()),"top-expander"===e.expander.layout?e.expander.layout="top-shrink":e.expander.layout="top-expander"};var _=function(){var e=o("userId"),t="/user/"+e,i="/user/message/un/"+e,n="/userAccount/balance/"+e,r="/userAccount/order/un/"+e,a="/operate",m="/service?region="+s.regionId,h="/billing/product/daily/consume",g="/quota?region="+s.regionId;c(t),l(i),u(n),d(r),p(a),v(h),f(g,m)};_()}])}),define("controllers/controllers",["controllers/app.controller","controllers/dashboard"],function(e){e.controller("demoController",["$scope","$http","$location",function(e,t,i){}])}),define("../common/services/common.service",["angular"],function(e){return e.module("common.service",[])}),define("../common/services/Config",["./common.service"],function(e){e.factory("Config",[function(){var e={};return e.urls={vm_regions:"/ecs/regions/",region_list:"/ecs/region/list",vm_list:"/ecs/region/{region}",vm_detail:"/ecs/region/{region}/vm/{vmId}",not_in_any_network_vm_list:"/ecs/vm/notInAnyNetwork/list",could_attach_subnet_list:"/ecs/vm/couldAttachSubnet/list",vm_attach_subnet_list:"/ecs/vm/attached/subnet/list",image_list:"/osi/image/list",flavor_group_data:"/osf/region/{region}/group",vm_create_old:"/ecs/region/{region}/vm-create",vm_create:"/ecs/vm/create",vm_buy:"/billing/buy/2",disk_buy:"/billing/buy/3",floatip_buy:"/billing/buy/4",router_buy:"/billing/buy/5",vm_rename:"/ecs/vm/rename",vm_start:"/ecs/region/{region}/vm-start",vm_stop:"/ecs/region/{region}/vm-stop",vm_reboot:"/ecs/vm/reboot",vm_delete:"/ecs/region/{region}/vm-delete",vm_password_change:"/ecs/vm/changeAdminPass",vm_disk_type:"/osv/volume/type/list",vm_network_shared_list:"/osn/network/shared/list",vm_calculate_price:"/billing/calculate/price/2",disk_calculate_price:"/billing/calculate/price/3",floatip_calculate_price:"/billing/calculate/price/4",route_calculate_price:"/billing/calculate/price/5",disk_list:"/osv/region/{region}",disk_detail:"/osv/region/{region}/volume/{volumeId}",disk_create:"/osv/region/{region}/volume-create",disk_delete:"/osv/region/{region}/volume-delete",disk_attach:"/ecs/region/{region}/vm-attach-volume",disk_detach:"/ecs/region/{region}/vm-detach-volume",disk_edit:"/osv/volume/edit",subnet_list:"/osn/subnet/private/list",subnet_option_list:"/osn/subnet/option/list",subnet_create:"/osn/subnet/private/create",subnet_delete:"/osn/subnet/private/delete",subnet_edit:"/osn/subnet/private/edit",subnet_attach_vm:"/ecs/vm/attach/subnet",subnet_detach_vm:"/ecs/vm/detach/subnet",vpc_list:"/osn/network/private/list",vpc_delete:"/osn/network/private/delete",vpc_create:"/osn/network/private/create",vpc_subnet_create:"/osn/network/subnet/private/create",vpc_edit:"/osn/network/private/edit",router_list:"/osn/router/list",network_public_list:"/osn/network/public/list",available_for_router_subnet_list:"/osn/network/private/available_for_router_interface/list",subnet_associate:"/osn/router/subnet/associate",subnet_remove:"/osn/router/subnet/separate",router_create:"/osn/router/create",router_edit:"/osn/router/edit",router_delete:"/osn/router/delete",floatIP_list:"/osn/floatingip/list",floatIP_create:"/osn/floatingip/create",floatIp_delete:"/osn/floatingip/delete",floatIP_edit:"/osn/floatingip/edit",floatIp_bindVm:"/ecs/vm/floatingip/bind",floatIp_unbindVm:"/ecs/vm/floatingip/unbind",snapshot_disk_list:"/osv/volume/snapshot/list",snapshot_disk_detail:"/osv/region/{region}/volume/snapshot/{volumeSnapshotId}",snapshot_disk_create:"/osv/volume/snapshot/create",snapshot_disk_delete:"/osv/volume/snapshot/delete",snapshot_vm_list:"/ecs/vm/snapshot/list",snapshot_vm_detail:"/ecs/vm/snapshot/detail",snapshot_vm_create:"/ecs/vm/snapshot/create",snapshot_vm_delete:"/ecs/vm/snapshot/delete",vm_vnc:"/ecs/region/{region}/vm-open-console",keypair_list:"/ecs/keypair/list",keypair_create:"/ecs/keypair/create",keypair_delete:"/ecs/keypair/delete",keypair_check:"/ecs/keypair/create/check"},e.REGEX={NAME:/^[a-zA-Z\u4e00-\u9fa5][a-zA-Z0-9\u4e00-\u9fa5\(（_\-\)）]{1,127}$/,NAME_KEYPAIR:/^[a-zA-Z][a-zA-Z0-9_\-]{1,127}$/,PASSWORD:/^(?=.*[0-9].*)(?=.*[A-Z].*)(?=.*[a-z].*)[a-zA-Z0-9]{8,30}$/},e.REGEX_MESSAGE={NAME:"名称须为2-128个字符，支持大小写字母数字或中文以及()（）_-，以大小写字母或中文开头",NAME_KEYPAIR:"名称须为2-128个字符，支持大小写字母数字以及_-，以大小写字母开头",PASSWORD:"8-30个字符，同时包含大小写字母和数字，不支持特殊符号"},e.vmStatuses={active:"活跃",building:"创建中",paused:"已暂停",suspended:"已挂起",stopped:"已关机",error:"异常",deleted:"已删除",arrearaged:"欠费停机"},e.vmTaskStatuses={building:"创建中",deleting:"删除中",stopping:"关机中",starting:"启动中",rebooting:"重启中",scheduling:"创建中",block_device_mapping:"创建中",spawning:"创建中",image_snapshotting:"快照创建中",image_uploading:"快照上传中",updating_password:"密码修改中",suspending:"挂起中",resuming:"恢复中",networking:"网络挂载中"},e.vmDiskStatuses=[{text:"创建中",value:"creating"},{text:"可用",value:"available"},{text:"挂载中",value:"attaching"},{text:"使用中",value:"in-use"},{text:"删除中",value:"deleting"},{text:"异常",value:"error"},{text:"已删除",value:"deleted"},{text:"卸载中",value:"detaching"}],e.vmVpcStatuses=[{text:"活跃",value:"ACTIVE"},{text:"可用",value:"DOWN"},{text:"创建中",value:"BUILD"},{text:"不可用",value:"ERROR"},{text:"不可用",value:"UNRECOGNIZED"}],e.vmFloatIpStatuses={AVAILABLE:"可用",BINDED:"已绑定"},e.vmImageStatuses=[{text:"未识别",value:"UNRECOGNIZED"},{text:"活跃",value:"ACTIVE"},{text:"上传中",value:"SAVING"},{text:"等待上传",value:"QUEUED"},{text:"停止",value:"KILLED"},{text:"删除等待",value:"PENDING_DELETE"},{text:"删除",value:"DELETED"},{text:"无",value:"NIL"}],e.allBuyPeriods=[1,2,3,4,5,6,7,8,9,12,24,36],e.serverName={uc:"lcp-uc.letvcloud.com",matrix:"matrix.letvclond.com"},e.EMPTY_TEXT="--",e.statusOperations={virtualMachine:{active:{create:1,start:0,stop:1,restart:1,createsnap:1,changeconfig:0,attachdisk:1,detachdisk:1,bindfloatIp:1,unbindfloatIp:1,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1},stopped:{create:1,start:1,stop:0,restart:0,createsnap:1,changeconfig:0,attachdisk:1,detachdisk:1,bindfloatIp:1,unbindfloatIp:1,joinnet:1,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":1},building:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},deleting:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},stopping:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},starting:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},rebooting:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},spawning:{create:0,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},deleted:{create:1,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":0},error:{create:1,start:0,stop:0,restart:0,createsnap:0,changeconfig:0,attachdisk:0,detachdisk:0,bindfloatIp:0,unbindfloatIp:0,joinnet:0,bindalarm:0,vnc:0,editssh:0,editpass:0,"delete":1},"default":{create:1,start:1,stop:1,restart:1,createsnap:1,changeconfig:1,attachdisk:1,detachdisk:1,bindfloatIp:1,unbindfloatIp:1,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1},volumes:{create:1,start:1,stop:1,restart:1,createsnap:1,changeconfig:1,attachdisk:1,detachdisk:1,bindfloatIp:1,unbindfloatIp:1,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1},volumesnull:{create:1,start:1,stop:1,restart:1,createsnap:1,changeconfig:1,attachdisk:1,detachdisk:0,bindfloatIp:1,unbindfloatIp:1,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1},"public":{create:1,start:1,stop:1,restart:1,createsnap:1,changeconfig:1,attachdisk:1,detachdisk:1,bindfloatIp:0,unbindfloatIp:1,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1},publicnull:{create:1,start:1,stop:1,restart:1,createsnap:1,changeconfig:1,attachdisk:1,detachdisk:1,bindfloatIp:1,unbindfloatIp:0,joinnet:1,bindalarm:1,vnc:1,editssh:1,editpass:1,"delete":1}},disk:{creating:{create:0,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},available:{create:1,createsnap:1,attachdisk:1,detachdisk:0,expandVolume:1,"delete":1,edit:1},attaching:{create:0,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},"in-use":{create:1,createsnap:1,attachdisk:0,detachdisk:1,expandVolume:0,"delete":0,edit:1},deleting:{create:0,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},error:{create:1,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},deleted:{create:1,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},detaching:{create:0,createsnap:0,attachdisk:0,detachdisk:0,expandVolume:0,"delete":0,edit:0},"default":{create:1,createsnap:1,attachdisk:1,detachdisk:1,expandVolume:1,"delete":1,edit:1},snapshots:{create:1,createsnap:1,attachdisk:1,detachdisk:1,expandVolume:1,"delete":0,edit:1},snapshotsnull:{create:1,createsnap:1,attachdisk:1,detachdisk:1,expandVolume:1,"delete":1,edit:1}},floatIp:{AVAILABLE:{bindVm:1,bindRouter:1,bindBalance:1,changeBandwidth:1,detach:0,bindalarm:1,edit:1,"delete":1},BINDED:{bindVm:0,bindRouter:0,bindBalance:0,changeBandwidth:0,detach:1,bindalarm:1,edit:1,"delete":0},"default":{bindVm:1,bindRouter:1,bindBalance:1,changeBandwidth:1,detach:1,bindalarm:1,edit:1,"delete":1}},router:{ACTIVE:{create:1,bindIp:1,unbindIp:1,bindsubnet:1,removesubnet:1,edit:1,bindalarm:1,"delete":1},DOWN:{create:1,bindIp:0,unbindIp:1,bindsubnet:0,removesubnet:1,edit:1,bindalarm:1,"delete":1},BUILD:{create:0,bindIp:0,unbindIp:0,bindsubnet:0,removesubnet:0,edit:0,bindalarm:0,"delete":0},ERROR:{create:1,bindIp:0,unbindIp:0,bindsubnet:0,removesubnet:0,edit:0,bindalarm:0,"delete":0},UNRECOGNIZED:{create:1,bindIp:0,unbindIp:0,bindsubnet:0,removesubnet:0,edit:0,bindalarm:0,"delete":0},subnets:{create:1,bindIp:1,unbindIp:1,bindsubnet:1,removesubnet:1,edit:1,bindalarm:1,"delete":0},subnetsnull:{create:1,bindIp:1,unbindIp:1,bindsubnet:1,removesubnet:0,edit:1,bindalarm:1,"delete":1},"default":{create:1,bindIp:1,unbindIp:1,bindsubnet:1,removesubnet:1,edit:1,bindalarm:1,"delete":1}},subnet:{vm:{create:1,bindvm:1,unbindvm:1,bindrouter:1,unbindrouter:1,edit:1,"delete":1},vmnull:{create:1,bindvm:1,unbindvm:0,bindrouter:1,unbindrouter:1,edit:1,"delete":1},router:{create:1,bindvm:1,unbindvm:1,bindrouter:0,unbindrouter:1,edit:1,"delete":1},routernull:{create:1,bindvm:1,unbindvm:1,bindrouter:1,unbindrouter:0,edit:1,"delete":1},"default":{create:1,bindvm:1,unbindvm:1,bindrouter:1,unbindrouter:1,edit:1,"delete":1}}},e}])}),define("../common/services/HttpService",["./common.service"],function(e){e.factory("HttpService",["$http","$q","$window","WidgetService",function(e,t,i,n){var r={};return r.doGet=function(r,a,s){var o=t.defer();return e.get(r,angular.extend({params:a},s)).success(function(e,t,r,a){1===e.result?o.resolve(e):2===e.result?i.location.reload():(o.reject(e),s&&s.disableGetGlobalNotify||n.notifyError(e.msgs[0]||"获取数据失败"))}),o.promise},r.doPost=function(t,i,n){return e.post(t,i,n)},r}])}),define("../common/services/WidgetService",["./common.service"],function(e){e.factory("WidgetService",["$modal","toaster",function(e,t){var i={};return i.openConfirmModal=function(t,i){return e.open({templateUrl:"/static/apps/cloudvm/templates/confirm-modal.html",controller:"ConfirmModalCtrl",size:"small",resolve:{message:function(){return i},title:function(){return t}}})},i.notifyError=function(e){t.pop("error",null,e,2e3,"trustedHtml")},i.notifyInfo=function(e){t.pop("info",null,e,2e3,"trustedHtml")},i.notifySuccess=function(e){t.pop("success",null,e,2e3,"trustedHtml")},i.notifyWarning=function(e){t.pop("warning",null,e,2e3,"trustedHtml")},i.showSpin=function(e){$("body").append('<div class="spin"></div>'),$("body").append('<div class="far-spin"></div>')},i.hideSpin=function(e){$("body").find(".spin").remove(),$("body").find(".far-spin").remove()},i}])}),define("../common/services/CurrentContext",["./common.service","jquery"],function(e,t){e.factory("CurrentContext",[function(){var e={};return e.regionId=t("#region_id").val(),e.allRegionData=null,e}])}),define("../common/services/Utility",["./common.service"],function(e){e.factory("Utility",["$timeout","$document",function(e,t){var i={};i.getRzSliderHack=function(t){return function(){e(function(){t.$broadcast("rzSliderForceRender")},50)}},i.delayQueueModel=function(){var t=[],i=null;return function(n,r){0==t.length&&(i=e(function(){r(t[t.length-1]),t.splice(0,t.length)},1e3)),t.push(n)}};var n=function(e,t){var i=[],n="",r="",a=!1;if(t.indexOf(".")>0){i=t.split(".");var s="";for(var o in i)s=s?s:e,s=s[i[o]],r=i[o];n=s}else r=t,n=e[t];return n instanceof Array?n.length>0&&(a=!0):n&&(a=!0),{flag:a,pathvalue:r}};i.setOperationBtns=function(e,t,i,r,a){var s=i.type,o=i.state,c=i.other,l=i.operations,u=[],d="";for(var p in t)if(r[p]=[],t[p].checked){var m=t[p];d=m[o]?m[o]:"default";for(var v in l){if(r[p][v]=r[p][v]?r[p][v]:a.statusOperations[s][d][l[v]],c.length>0)for(var f in c){var h=n(m,c[f]).flag,g=n(m,c[f]).pathvalue;h?r[p][v]=r[p][v]*a.statusOperations[s][g][l[v]]:r[p][v]=r[p][v]*a.statusOperations[s][g+"null"][l[v]]}else r[p][v]=a.statusOperations[s][d][l[v]];u[v]=1}}else r[p]=[1,1,1,1,1,1,1,1,1,1,1,1];for(var p in r)for(var v in r[p])u[v]=u[v]*r[p][v];return u};var r=function(e){for(var i=t[0].cookie.split(";"),n=0;n<i.length;n++){var r=i[n].split("=");if(r[0]==e)return r[1]}return""},a=function(e,i){t[0].cookie=e+"="+i+";"};return i.isServiceReady=function(e){var t=!1,i=r(e);return i&&"notready"==i?a(e,""):t=!0,t},i.isInt=function(e){return Number(e)%1===0},i}])}),define("../common/services/ModelService",["./common.service"],function(e){e.factory("ModelService",["$modal","toaster",function(e,t){var i={};return i.SelectModel=function(e,t,i){this.text=e,this.value=t,this.relatedOption=i||{}},i}])}),define("../common/services/services",["./common.service","./Config","./HttpService","./WidgetService","./CurrentContext","./Utility","./ModelService"],function(e){}),define("../common/directives/common.directive",["angular"],function(e){return e.module("common.directive",[])}),define("../common/directives/directives",["./common.directive"],function(e){e.directive("passwordVerify",function(){return{require:"ngModel",scope:{passwordVerify:"="},link:function(e,t,i,n){var r=!0;e.$watch(function(){var t;return(e.passwordVerify||n.$viewValue)&&(t=e.passwordVerify+"_"+n.$viewValue),t},function(t){return r?(r=!1,n.$setValidity("passwordVerify",!0),!0):void(t&&n.$parsers.unshift(function(t){var i=e.passwordVerify;return i!==t?void n.$setValidity("passwordVerify",!1):(n.$setValidity("passwordVerify",!0),t)}))})}}}),e.directive("nameInputRestrict",["Config",function(e){return{require:"ngModel",link:function(t,i,n,r){r.$validators.nameInputRestrict=function(t,i){return i&&e.REGEX.NAME.test(i)?!0:!1}}}}]),e.directive("nameInputKeypairRestrict",["Config",function(e){return{require:"ngModel",link:function(t,i,n,r){r.$validators.nameInputKeypairRestrict=function(t,i){return i&&e.REGEX.NAME_KEYPAIR.test(i)?!0:!1}}}}]),e.directive("passwordRestrict",["Config",function(e){return{require:"ngModel",link:function(t,i,n,r){r.$validators.passwordRestrict=function(t,i){return i&&e.REGEX.PASSWORD.test(i)?!0:!1}}}}]),e.directive("passwordConfirm",function(){return{require:"ngModel",scope:{passwordModel:"=passwordModel"},link:function(e,t,i,n){var r=!0;e.$watch(function(){var t;return(e.passwordModel||n.$viewValue)&&(t=e.passwordModel+"_"+n.$viewValue),t},function(t){r&&(r=!1,n.$setValidity("passwordConfirm",!0)),t&&(e.passwordModel!==n.$viewValue?n.$setValidity("passwordConfirm",!1):n.$setValidity("passwordConfirm",!0))})}}}),e.directive("vmCreateKeypairValidator",function(){return{require:"ngModel",link:function(e,t,i,n){n.$validators.keypairIsNullRestrict=function(e,t){return t?!0:!1},n.$validators.keypairValueRestrict=function(e,t){return t&&t.value?!0:!1}}}}),e.directive("numericInput",function(){var e=10,t=1;return{restrict:"AE",scope:{externalModel:"=numericModel",max:"=numericMax",min:"=numericMin"},link:function(i,n,r){i.model=i.externalModel,void 0===i.max&&(i.max=e),void 0===i.min&&(i.min=t),i.up=function(){++i.model>i.max&&--i.model},i.down=function(){--i.model<i.min&&++i.model},i.$watch("model",function(e){if(isNaN(e))i.model=i.min;else{var t=Number(e);t>i.max?i.model=i.max:t<i.min?i.model=i.min:i.model=t}i.externalModel=i.model})},templateUrl:"/static/apps/common/directives/numeric-input/template.html"}}),e.directive("leSelect",["$document",function(e){return{restrict:"AE",scope:{model:"=selectModel",options:"=selectOptions",externalEmptyText:"@selectEmptyText"},link:function(t,i,n){t.emptyText=t.externalEmptyText?t.externalEmptyText:"暂无数据",t.toggleSelect=function(i){t.isOpen||(t.isOpen=!0,i.stopPropagation(),e.bind("click",r))},t.selectOption=function(e){t.model=e};var r=function(i){t.isOpen&&(e.unbind("click",r),t.isOpen=!1,t.$$phase||t.$apply())}},templateUrl:"/static/apps/common/directives/le-select/template.html"}}]),e.directive("leSlider",["Utility",function(e){return{restrict:"AE",scope:{externalModel:"=leSliderModel",step:"@leSliderStep",min:"=leSliderMin",isMinChangeable:"@isSliderMinChangeable",max:"@leSliderMax",unit:"@leSliderUnit"},link:function(t,i,n){var r=e.delayQueueModel(),a=Number(t.max),s=Number(t.min);"true"===t.isMinChangeable&&t.$watch("min",function(e){s=Number(e),t.model=s}),t.$watch("externalModel",function(e){t.model=e}),t.$watch("model",function(i){null===i||isNaN(i)?t.model=s:(e.isInt(i)||(i=Math.floor(i)),a>=i&&i>=s?(i%t.step!==0&&(i=Math.ceil(i/t.step)*t.step),r(i,function(e){t.model=Number(e),t.externalModel=t.model})):i>a?t.model=a:s>i&&(t.model=s))})},templateUrl:"/static/apps/common/directives/le-slider/template.html"}}]),e.directive("buyPeriodSelector",function(){return{restrict:"AE",scope:{selectedBuyPeriod:"=buyPeriodModel",allBuyPeriods:"=buyPeriodOptions"},link:function(e,t,i){e.selectBuyPeriod=function(t){e.selectedBuyPeriod=t},e.isSelectedBuyPeriod=function(t){return e.selectedBuyPeriod===t}},templateUrl:"/static/apps/common/directives/buy-period-selector/template.html"}}),e.directive("leAutoFocus",["$timeout",function(e){return{restrict:"AE",link:function(t,i,n){i&&i[0]&&e(function(){i[0].focus()})}}}]),e.directive("inputValidationTooltip",function(){return{restrict:"AE",scope:{message:"@validationMessage"},link:function(e,t,i){},templateUrl:"/static/apps/common/directives/input-validation-tooltip/template.html"}})}),define("directives/app.directive",["angular"],function(e){return e.module("app.directive",[])}),define("directives/directives",["directives/app.directive"],function(e){e.directive("leExpander",function(){return{restrict:"AE",transclude:!0,replace:!0,scope:{layout:"@"},template:"<div ng-transclude></div>",link:function(e,t,i){e.$watch("layout",function(){var i=t.find(".operation-items");"top-expander"==e.layout?(i.addClass("operation-expander"),i.height(i.height()+420),i.css("transition","height .5s ease-in-out")):"top-shrink"==e.layout&&(i.removeClass("operation-expander"),i.height(i.height()-420),i.css("transition","height .5s ease-in"))})}}})}),define("../common/filters/common.filter",["angular"],function(e){return e.module("common.filter",[])}),define("../common/filters/filters",["./common.filter"],function(e){e.filter("propsFilter",function(){return function(e,t){var i=[];return angular.isArray(e)?e.forEach(function(e){for(var n=!1,r=Object.keys(t),a=0;a<r.length;a++){var s=r[a],o=t[s].toLowerCase();if(-1!==e[s].toString().toLowerCase().indexOf(o)){n=!0;break}}n&&i.push(e)}):i=e,i}}),e.filter("mclusterTypeFilter",function(){return function(e){var t="";return t=e?"后台创建":"系统创建"}}),e.filter("vmStatusFilter",["Config",function(e){var t=e.vmStatuses,i=e.vmTaskStatuses;return function(e){var n="",r=e.vmState,a=e.taskState;return n=a?i[a]?i[a]:a:t[r]?t[r]:r}}]),e.filter("diskStatusFilter",["Config",function(e){var t=e.vmDiskStatuses;return function(e){for(var i="",n=0,r=t.length;r>n;n++)if(t[n].value==e){i=t[n].text;break}return i||"未知"}}]),e.filter("vpcStatusFilter",["Config",function(e){var t=e.vmVpcStatuses;return function(e){for(var i="",n=0,r=t.length;r>n;n++)if(t[n].value==e){i=t[n].text;break}return i||"未知"}}]),e.filter("vpcSubnetsFilter",["Config",function(e){return function(t){return t.map(function(e){return e.name}).join(", ")||e.EMPTY_TEXT}}]),e.filter("buyPeriodFilter",[function(){return function(e,t){var i=null;return i=9>=e?t?e+"个月":e:parseInt(e/12)+"年"}}]),e.filter("publicNetworkGatewayFilter",[function(){return function(e){var t="";return t="true"==e?"开启":"关闭"}}]),e.filter("vmFlavorFilter",[function(){return function(e){var t=0;return e.volumes&&e.volumes.length&&(t=e.volumes.length>1?e.volumes.map(function(e){return e.size;
}).reduce(function(e,t){return e+t}):e.volumes[0].size),[e.flavor.vcpus+"核",Math.ceil(e.flavor.ram/1024)+"G",t+"G"].join("/")}}]),e.filter("sideMenuUrlFilter",[function(){return function(e){var t="";return t=e["abstract"]?"javascript:void(0);":e.isSpaUrl?"#"+e.url:e.url,t||"未知"}}]),e.filter("vmFloatIpFilter",["Config",function(e){var t=e.vmFloatIpStatuses;return function(e){var i="";return i=t[e],i||"未知"}}]),e.filter("routerSubnetFilter",[function(){return function(e){var t="";if(null==e[0])return"--";for(var i=0,n=e.length;n>i;i++)t=""!==t?t+","+e[i].name:e[i].name;return t}}]),e.filter("routerGatewayFilter",[function(){return function(e){return e===!0?"开启":"关闭"}}]),e.filter("routerStatusFilter",[function(){return function(e){var t="";return t="ACTIVE"===e?"活跃":"DOWN"===e?"关闭":"BUILD"===e?"构建中":"ERROR"===e?"错误":"UNRECOGNIZED"===e?"未识别":"未知"}}]),e.filter("vmImageStatusFilter",["Config",function(e){var t=e.vmImageStatuses;return function(e){for(var i="",n=0,r=t.length;r>n;n++)if(t[n].value==e){i=t[n].text;break}return i||"未知"}}]),e.filter("vmImageSizeFilter",[function(){return function(e){var t="";return t=e/1073741824>=1?(e/1073741824).toFixed(2)+"GB":e/1048576>=1?(e/1048576).toFixed(2)+"MB":e/1024>=1?(e/1024).toFixed(2)+"KB":e+"B"}}])}),define("app",["angular","controllers/controllers","../common/services/services","../common/directives/directives","directives/directives","../common/filters/filters"],function(e){var t=e.module("myApp",["ngAnimate","ngRoute","ui.bootstrap","toaster","app.controller","common.service","common.directive","app.directive","common.filter"]);return t.run(["$route","$rootScope","$location","routes",function(e,t,i,n){}]),t}),define("app.router",["app"],function(e){"use strict";var t=function(e,t){var i=function(t){e.when(t.url,t.config)};angular.forEach(t,function(e,t){i(e)}),e.otherwise({redirectTo:"/dashboard"})},i=function(){return[{url:"/dashboard",title:"概览",config:{templateUrl:"/static/apps/dashboard/views/dashboard.html"}}]};e.constant("routes",i()),e.config(["$routeProvider","routes",t])}),require.config({paths:{jquery:"../../javascripts/dist/jquery.min",bootstrap:"../../javascripts/dist/bootstrap.min",angular:"../../javascripts/dist/angular-package.min",common:"../../javascripts/common",browserCheck:"../../staticPage/js/browserCheck",app:"./app-build","app.router":"./app.route"},shim:{browserCheck:{deps:["jquery"],exports:"browserCheck"},bootstrap:{deps:["jquery"],exports:"bootstrap"},angular:{deps:["common"],exports:"angular"}}}),require(["jquery","angular","common","bootstrap","app","app.router"],function(e,t){t.bootstrap(document,["myApp"])}),define("main-build",function(){});